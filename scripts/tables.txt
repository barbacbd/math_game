#CREATE DATABASE project;
use project;

DROP TABLE IF EXISTS userScore;
DROP TABLE IF EXISTS userpass;
DROP TABLE IF EXISTS QuestionInfo;

CREATE TABLE userpass(
    username VARCHAR(42) NOT NULL, 
    password VARCHAR(50) NOT NULL,
    status INT NOT NULL,
    PRIMARY KEY(username)
) ENGINE = INNODB;

CREATE TABLE QuestionInfo(
    questionNumber INT NOT NULL,
    op_one INT NOT NULL,
    operator VARCHAR(2) NOT NULL,
    op_two INT NOT NULL,
    answer INT NOT NULL
) ENGINE = INNODB;

CREATE TABLE userScore(
    username VARCHAR(42) NOT NULL, 
    totalPointsEarned INT,
    numberAttempts INT,
    numberCorrect INT,
    FOREIGN KEY(username) REFERENCES userpass(username)
) ENGINE = INNODB;


delimiter //
CREATE TRIGGER scoreEnter AFTER INSERT ON userpass
FOR EACH ROW
BEGIN
    INSERT INTO userScore VALUES (NEW.username, 0, 0, 0);
END;//
delimiter ;
